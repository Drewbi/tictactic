import { css, html, LitElement } from "lit"
import { customElement, property } from "lit/decorators.js"
import { Player } from "./types"

@customElement('game-piece')
export class GamePiece extends LitElement {
  @property()
  type: Player | undefined

  @property({ type: Number })
  stage: number = 1

  static styles = css`
    :host {
      width: 100%;
      height: 100%;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    .piece {
      fill: white;
    }

    @media (prefers-color-scheme: light) {
      .piece {
      fill: #333;
    }
    }
  `

  render() {
    let piece;

    if (this.type === Player.x) {
      switch(this.stage) {
        case 1:
          piece = html`
          <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="piece" d="M-7.62939e-06 -14.1422L100 85.8578L200 -14.1422L214.142 -1.52588e-05L114.142 100L214.146 200.004L200.004 214.146L100 114.142L-0.000198364 214.142L-14.1423 200L85.8579 100L-14.1421 -1.52588e-05L-7.62939e-06 -14.1422Z" />
          </svg>
        `
          break;
        case 2:
          piece = html`
          <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="piece" d="M-0.0036068 -14.1458L47.4725 33.3302L33.3303 47.4724L-14.1457 -0.00369263L-0.0036068 -14.1458ZM214.139 -0.00369263L166.663 47.4718L152.521 33.3297L199.996 -14.1458L214.139 -0.00369263ZM147.472 66.663L114.139 99.9963L147.474 133.332L133.332 147.474L99.9964 114.138L66.6629 147.472L52.5208 133.33L85.8543 99.9963L52.5221 66.6642L66.6643 52.522L99.9964 85.8542L133.33 52.5209L147.472 66.663ZM47.4717 166.663L-0.00379944 214.139L-14.1459 199.997L33.3296 152.521L47.4717 166.663ZM166.666 152.524L214.142 200L200 214.142L152.524 166.666L166.666 152.524Z" />
          </svg>
        `
          break;
        case 3:
          piece = html`
          <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="piece" d="M0.000238419 -14.1421L21.8348 7.69252L7.69269 21.8347L-14.1419 7.05719e-05L0.000238419 -14.1421ZM214.142 7.05719e-05L192.308 21.8345L178.166 7.69238L200 -14.1421L214.142 7.05719e-05ZM171.835 42.3078L142.308 71.8346L128.166 57.6924L157.693 28.1657L171.835 42.3078ZM42.3087 28.1664L71.8357 57.6934L57.6936 71.8356L28.1666 42.3085L42.3087 28.1664ZM121.835 92.3078L114.142 100L121.837 107.694L107.695 121.836L100 114.142L92.3078 121.835L78.1657 107.692L85.8581 100L78.1675 92.3094L92.3096 78.1673L100 85.8579L107.692 78.1657L121.835 92.3078ZM71.8345 142.308L42.3078 171.835L28.1656 157.693L57.6924 128.166L71.8345 142.308ZM142.311 128.168L171.838 157.695L157.695 171.837L128.168 142.31L142.311 128.168ZM21.8345 192.308L4.57764e-05 214.142L-14.1421 200L7.69236 178.166L21.8345 192.308ZM192.311 178.169L214.146 200.004L200.004 214.146L178.169 192.311L192.311 178.169Z" />
          </svg>
        `
          break;
      }
    } else if (this.type === Player.o) {
      switch(this.stage) {
        case 1:
          piece = html`
            <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path class="piece" fill-rule="evenodd" clip-rule="evenodd" d="M100 180C144.183 180 180 144.183 180 100C180 55.8172 144.183 20 100 20C55.8172 20 20 55.8172 20 100C20 144.183 55.8172 180 100 180ZM100 200C155.228 200 200 155.228 200 100C200 44.7715 155.228 0 100 0C44.7715 0 0 44.7715 0 100C0 155.228 44.7715 200 100 200Z" />
            </svg>
          `
          break;
        case 2:
          piece = html`
          <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="piece" d="M185.746 151.484C187.463 148.632 189.041 145.686 190.471 142.657C196.583 129.719 200 115.258 200 100C200 84.7416 196.583 70.2813 190.471 57.3429C189.041 54.3139 187.463 51.3684 185.746 48.5155C184.003 45.6193 182.118 42.8185 180.1 40.1231L163.846 47.8003L172.387 65.8845C177.263 76.2082 180 87.7567 180 100C180 112.243 177.263 123.792 172.387 134.115L163.846 152.2L180.1 159.877C182.118 157.181 184.003 154.381 185.746 151.484ZM159.877 180.1L152.2 163.846L134.115 172.387C123.792 177.263 112.243 180 100 180C87.7567 180 76.2082 177.263 65.8845 172.387L47.8003 163.846L40.1231 180.1C42.8185 182.118 45.6193 184.003 48.5155 185.746C51.3684 187.463 54.3139 189.041 57.3429 190.471C70.2813 196.583 84.7416 200 100 200C115.258 200 129.719 196.583 142.657 190.471C145.686 189.041 148.632 187.463 151.484 185.746C154.381 184.003 157.181 182.118 159.877 180.1ZM19.9004 159.877L36.1545 152.2L27.6128 134.115C22.7367 123.792 20 112.243 20 100C20 87.7567 22.7367 76.2082 27.6128 65.8845L36.1545 47.8003L19.9004 40.1231C17.8822 42.8185 15.9969 45.6193 14.2541 48.5155C12.5375 51.3684 10.9592 54.3139 9.52856 57.3429C3.4174 70.2813 0 84.7416 0 100C0 115.258 3.4174 129.719 9.52856 142.657C10.9592 145.686 12.5375 148.632 14.2541 151.484C15.9969 154.381 17.8822 157.181 19.9004 159.877ZM40.1231 19.9004L47.8003 36.1545L65.8845 27.6128C76.2082 22.7367 87.7567 20 100 20C112.243 20 123.792 22.7367 134.115 27.6128L152.2 36.1545L159.877 19.9004C157.181 17.8822 154.381 15.9969 151.484 14.2541C148.632 12.5375 145.686 10.9592 142.657 9.52856C129.719 3.4174 115.258 0 100 0C84.7416 0 70.2813 3.4174 57.3429 9.52856C54.3139 10.9592 51.3684 12.5375 48.5155 14.2541C45.6193 15.9969 42.8185 17.8822 40.1231 19.9004Z" />
          </svg>
        `
          break;
        case 3:
          piece = html`
          <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path class="piece" d="M195.546 129.602C196.527 126.432 197.355 123.195 198.02 119.899C199.319 113.468 200 106.814 200 100C200 93.1863 199.319 86.5317 198.02 80.1008C197.355 76.805 196.527 73.568 195.546 70.3984C194.544 67.1585 193.381 63.989 192.067 60.8992L174.457 64.4548L178.416 84.0591C179.453 89.1943 180 94.523 180 100C180 105.477 179.453 110.806 178.416 115.941L174.457 135.545L192.067 139.101C193.381 136.011 194.544 132.841 195.546 129.602ZM139.101 192.067L135.545 174.457L115.941 178.416C110.806 179.453 105.477 180 100 180C94.523 180 89.1943 179.453 84.0591 178.416L64.4548 174.457L60.8992 192.067C63.989 193.381 67.1585 194.544 70.3984 195.546C73.568 196.527 76.805 197.355 80.1007 198.02C86.5317 199.319 93.1863 200 100 200C106.814 200 113.468 199.319 119.899 198.02C123.195 197.355 126.432 196.527 129.602 195.546C132.841 194.544 136.011 193.381 139.101 192.067ZM7.93327 139.101L25.5427 135.545L21.5843 115.941C20.5475 110.806 20 105.477 20 100C20 94.523 20.5475 89.1943 21.5843 84.0591L25.5427 64.4548L7.93327 60.8992C6.61936 63.989 5.45645 67.1585 4.4538 70.3984C3.47292 73.568 2.64542 76.805 1.97997 80.1007C0.681468 86.5317 0 93.1863 0 100C0 106.814 0.681468 113.468 1.97997 119.899C2.64542 123.195 3.47292 126.432 4.4538 129.602C5.45645 132.841 6.61936 136.011 7.93327 139.101ZM60.8992 7.93327L64.4548 25.5427L84.0591 21.5843C89.1943 20.5475 94.523 20 100 20C105.477 20 110.806 20.5475 115.941 21.5843L135.545 25.5427L139.101 7.93327C136.011 6.61936 132.841 5.45645 129.602 4.4538C126.432 3.47292 123.195 2.64542 119.899 1.97997C113.468 0.681469 106.814 0 100 0C93.1863 0 86.5317 0.681468 80.1008 1.97997C76.805 2.64542 73.568 3.47292 70.3984 4.4538C67.1585 5.45645 63.989 6.61936 60.8992 7.93327Z" />
          </svg>
        `
          break;
      }
    }

    return piece
  }
}

declare global {
  interface HTMLElementTagNameMap {
    'game-piece': GamePiece
  }
}
